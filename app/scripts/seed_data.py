from app import create_app, db
from app.models.models import Periodo, TipoCalendario, Calendario, CategoriaCalendario, Eventos
from datetime import datetime, timedelta

def seed_database():
    app = create_app()
    with app.app_context():
        # Limpar dados existentes
        Eventos.query.delete()
        CategoriaCalendario.query.delete()
        Calendario.query.delete()
        TipoCalendario.query.delete()
        Periodo.query.delete()
        
        print("ðŸ”„ Iniciando populaÃ§Ã£o do banco de dados...")
        
        # Inserir perÃ­odos acadÃªmicos
        periodos = [
            Periodo(descricao='1Âº Semestre 2025', datainicial=datetime(2025, 2, 1), datafinal=datetime(2025, 7, 15)),
            Periodo(descricao='2Âº Semestre 2025', datainicial=datetime(2025, 8, 1), datafinal=datetime(2025, 12, 20)),
            Periodo(descricao='FÃ©rias VerÃ£o 2025', datainicial=datetime(2025, 12, 21), datafinal=datetime(2026, 1, 31)),
            Periodo(descricao='Recesso Julho 2025', datainicial=datetime(2025, 7, 16), datafinal=datetime(2025, 7, 31))
        ]
        db.session.add_all(periodos)
        db.session.commit()
        print("âœ… PerÃ­odos acadÃªmicos inseridos")
        
        # Inserir tipos de calendÃ¡rio (cada um com uma sigla Ãºnica)
        tipos = [
            TipoCalendario(sigla='GRAD', nome='GraduaÃ§Ã£o'),
            TipoCalendario(sigla='POS', nome='PÃ³s-GraduaÃ§Ã£o'),
            TipoCalendario(sigla='INST', nome='Institucional'),
            TipoCalendario(sigla='EVEN', nome='Eventos AcadÃªmicos')
        ]
        db.session.add_all(tipos)
        db.session.commit()
        print("âœ… Tipos de calendÃ¡rio inseridos")
        
        # Inserir calendÃ¡rios
        calendarios = [
            Calendario(id_tipo=1, nome='CalendÃ¡rio GraduaÃ§Ã£o', ano=2025, datainicio=datetime(2025, 1, 1), datafim=datetime(2025, 12, 31), ativo=True),
            Calendario(id_tipo=2, nome='CalendÃ¡rio PÃ³s-GraduaÃ§Ã£o', ano=2025, datainicio=datetime(2025, 1, 1), datafim=datetime(2025, 12, 31), ativo=True),
            Calendario(id_tipo=3, nome='CalendÃ¡rio Institucional', ano=2025, datainicio=datetime(2025, 1, 1), datafim=datetime(2025, 12, 31), ativo=True),
            Calendario(id_tipo=4, nome='Eventos AcadÃªmicos', ano=2025, datainicio=datetime(2025, 1, 1), datafim=datetime(2025, 12, 31), ativo=False) # Deixamos um inativo para exemplo
        ]
        db.session.add_all(calendarios)
        db.session.commit()
        print("âœ… CalendÃ¡rios inseridos")
        
        # Inserir categorias de calendÃ¡rio
        categorias = [
            # GraduaÃ§Ã£o - 1Âº Semestre
            CategoriaCalendario(id_calendario=1, id_periodo=1, nome='Aulas Regulares', corassociada='#3788d8', totaldias=100, diassemanasvalidos='12345', habilitacaocontagem=True),
            CategoriaCalendario(id_calendario=1, id_periodo=1, nome='Provas', corassociada='#d81b60', totaldias=10, diassemanasvalidos='12345', habilitacaocontagem=True),
            CategoriaCalendario(id_calendario=1, id_periodo=1, nome='Feriados', corassociada='#8e24aa', diassemanasvalidos='1234567', habilitacaocontagem=False),
            
            # GraduaÃ§Ã£o - 2Âº Semestre
            CategoriaCalendario(id_calendario=1, id_periodo=2, nome='Aulas Regulares', corassociada='#4285F4', totaldias=100, diassemanasvalidos='12345', habilitacaocontagem=True),
            CategoriaCalendario(id_calendario=1, id_periodo=2, nome='Provas', corassociada='#DB4437', totaldias=10, diassemanasvalidos='12345', habilitacaocontagem=True),
            CategoriaCalendario(id_calendario=1, id_periodo=2, nome='Feriados', corassociada='#AB47BC', diassemanasvalidos='1234567', habilitacaocontagem=False),
            
            # PÃ³s-GraduaÃ§Ã£o - 1Âº Semestre
            CategoriaCalendario(id_calendario=2, id_periodo=1, nome='Aulas PÃ³s', corassociada='#4caf50', totaldias=90, diassemanasvalidos='12345', habilitacaocontagem=True),
            CategoriaCalendario(id_calendario=2, id_periodo=1, nome='Defesas e SeminÃ¡rios', corassociada='#ff9800', totaldias=None, diassemanasvalidos='12345', habilitacaocontagem=False),
            
            # PÃ³s-GraduaÃ§Ã£o - 2Âº Semestre
            CategoriaCalendario(id_calendario=2, id_periodo=2, nome='Aulas PÃ³s', corassociada='#00897B', totaldias=90, diassemanasvalidos='12345', habilitacaocontagem=True),
            CategoriaCalendario(id_calendario=2, id_periodo=2, nome='Defesas e SeminÃ¡rios', corassociada='#FF8F00', totaldias=None, diassemanasvalidos='12345', habilitacaocontagem=False),
            
            # Institucional - Ano todo
            CategoriaCalendario(id_calendario=3, id_periodo=1, nome='ReuniÃµes', corassociada='#795548', totaldias=None, diassemanasvalidos='12345', habilitacaocontagem=False),
            CategoriaCalendario(id_calendario=3, id_periodo=2, nome='ReuniÃµes', corassociada='#5D4037', totaldias=None, diassemanasvalidos='12345', habilitacaocontagem=False),
            
            # Eventos - Ano todo
            CategoriaCalendario(id_calendario=4, id_periodo=1, nome='Palestras', corassociada='#607d8b', totaldias=None, diassemanasvalidos='12345', habilitacaocontagem=False),
            CategoriaCalendario(id_calendario=4, id_periodo=2, nome='Congressos', corassociada='#455A64', totaldias=None, diassemanasvalidos='12345', habilitacaocontagem=False)
        ]
        db.session.add_all(categorias)
        db.session.commit()
        print("âœ… Categorias inseridas")
        
        # ======= GRADUAÃ‡ÃƒO =======
        
        # GraduaÃ§Ã£o - Aulas Regulares (1Âº Semestre)
        eventos_aulas_1s = [
            Eventos(
                id_categoria=1,  # Aulas Regulares 1Âº semestre
                titulo='PerÃ­odo Letivo - 1Âº Semestre',
                descricao='Aulas regulares do 1Âº semestre de graduaÃ§Ã£o',
                datainicio=datetime(2025, 2, 3),  # Segunda-feira
                datafim=datetime(2025, 7, 4),     # Sexta-feira (respeitando o limite de 100 dias)
                dia_todo=False,
                local='Todos os campi'
            )
        ]
        
        # GraduaÃ§Ã£o - Provas (1Âº Semestre)
        eventos_provas_1s = [
            Eventos(
                id_categoria=2,
                titulo='AvaliaÃ§Ã£o P1',
                descricao='Primeira avaliaÃ§Ã£o parcial',
                datainicio=datetime(2025, 4, 7),  # Segunda
                datafim=datetime(2025, 4, 11),    # Sexta (5 dias)
                dia_todo=False,
                local='Salas de aula'
            ),
            Eventos(
                id_categoria=2,
                titulo='AvaliaÃ§Ã£o P2',
                descricao='Segunda avaliaÃ§Ã£o parcial',
                datainicio=datetime(2025, 6, 23),  # Segunda
                datafim=datetime(2025, 6, 27),     # Sexta (5 dias)
                dia_todo=False,
                local='Salas de aula'
            )
        ]
        
        # GraduaÃ§Ã£o - Feriados (1Âº Semestre)
        eventos_feriados_1s = [
            Eventos(
                id_categoria=3,
                titulo='Carnaval',
                descricao='Feriado nacional',
                datainicio=datetime(2025, 3, 4),
                datafim=datetime(2025, 3, 4),
                dia_todo=True,
                local=None
            ),
            Eventos(
                id_categoria=3,
                titulo='Tiradentes',
                descricao='Feriado nacional',
                datainicio=datetime(2025, 4, 21),
                datafim=datetime(2025, 4, 21),
                dia_todo=True,
                local=None
            ),
            Eventos(
                id_categoria=3,
                titulo='Dia do Trabalho',
                descricao='Feriado nacional',
                datainicio=datetime(2025, 5, 1),
                datafim=datetime(2025, 5, 1),
                dia_todo=True,
                local=None
            )
        ]
        
        # GraduaÃ§Ã£o - Aulas Regulares (2Âº Semestre)
        eventos_aulas_2s = [
            Eventos(
                id_categoria=4,  # Aulas Regulares 2Âº semestre
                titulo='PerÃ­odo Letivo - 2Âº Semestre',
                descricao='Aulas regulares do 2Âº semestre de graduaÃ§Ã£o',
                datainicio=datetime(2025, 8, 4),   # Segunda-feira
                datafim=datetime(2025, 12, 12),    # Sexta-feira
                dia_todo=False,
                local='Todos os campi'
            )
        ]
        
        # GraduaÃ§Ã£o - Provas (2Âº Semestre)
        eventos_provas_2s = [
            Eventos(
                id_categoria=5,
                titulo='AvaliaÃ§Ã£o P1',
                descricao='Primeira avaliaÃ§Ã£o parcial',
                datainicio=datetime(2025, 9, 29),  # Segunda
                datafim=datetime(2025, 10, 3),     # Sexta (5 dias)
                dia_todo=False,
                local='Salas de aula'
            ),
            Eventos(
                id_categoria=5,
                titulo='AvaliaÃ§Ã£o P2',
                descricao='Segunda avaliaÃ§Ã£o parcial',
                datainicio=datetime(2025, 11, 24), # Segunda
                datafim=datetime(2025, 11, 28),    # Sexta (5 dias)
                dia_todo=False,
                local='Salas de aula'
            )
        ]
        
        # GraduaÃ§Ã£o - Feriados (2Âº Semestre)
        eventos_feriados_2s = [
            Eventos(
                id_categoria=6,
                titulo='IndependÃªncia do Brasil',
                descricao='Feriado nacional',
                datainicio=datetime(2025, 9, 7),
                datafim=datetime(2025, 9, 7),
                dia_todo=True,
                local=None
            ),
            Eventos(
                id_categoria=6,
                titulo='Nossa Senhora Aparecida',
                descricao='Feriado nacional',
                datainicio=datetime(2025, 10, 12),
                datafim=datetime(2025, 10, 12),
                dia_todo=True,
                local=None
            ),
            Eventos(
                id_categoria=6,
                titulo='Finados',
                descricao='Feriado nacional',
                datainicio=datetime(2025, 11, 2),
                datafim=datetime(2025, 11, 2),
                dia_todo=True,
                local=None
            ),
            Eventos(
                id_categoria=6,
                titulo='ProclamaÃ§Ã£o da RepÃºblica',
                descricao='Feriado nacional',
                datainicio=datetime(2025, 11, 15),
                datafim=datetime(2025, 11, 15),
                dia_todo=True,
                local=None
            ),
            Eventos(
                id_categoria=6,
                titulo='Natal',
                descricao='Feriado nacional',
                datainicio=datetime(2025, 12, 25),
                datafim=datetime(2025, 12, 25),
                dia_todo=True,
                local=None
            )
        ]
        
        # ======= PÃ“S-GRADUAÃ‡ÃƒO =======
        
        # PÃ³s-GraduaÃ§Ã£o - Aulas (1Âº Semestre)
        eventos_pos_1s = [
            Eventos(
                id_categoria=7,
                titulo='PerÃ­odo de Aulas - PÃ³s-GraduaÃ§Ã£o 1Âº Semestre',
                descricao='PerÃ­odo de aulas do 1Âº semestre de pÃ³s-graduaÃ§Ã£o',
                datainicio=datetime(2025, 2, 10),  # Segunda
                datafim=datetime(2025, 7, 5),      # SÃ¡bado (mas vai contar sÃ³ dias Ãºteis)
                dia_todo=False,
                local='Bloco de PÃ³s-GraduaÃ§Ã£o'
            )
        ]
        
        # PÃ³s-GraduaÃ§Ã£o - Defesas e SeminÃ¡rios (1Âº Semestre)
        eventos_defesas_1s = [
            Eventos(
                id_categoria=8,
                titulo='SeminÃ¡rio de Pesquisa',
                descricao='ApresentaÃ§Ã£o de projetos de pesquisa',
                datainicio=datetime(2025, 3, 20),
                datafim=datetime(2025, 3, 20),
                dia_todo=False,
                local='AuditÃ³rio Central'
            ),
            Eventos(
                id_categoria=8,
                titulo='Defesa de DissertaÃ§Ã£o: Maria Silva',
                descricao='InteligÃªncia Artificial aplicada Ã  EducaÃ§Ã£o',
                datainicio=datetime(2025, 5, 15),
                datafim=datetime(2025, 5, 15),
                dia_todo=False,
                local='Sala de Defesas 1'
            ),
            Eventos(
                id_categoria=8,
                titulo='Defesa de Tese: JoÃ£o Santos',
                descricao='Algoritmos evolucionÃ¡rios em problemas de otimizaÃ§Ã£o',
                datainicio=datetime(2025, 6, 12),
                datafim=datetime(2025, 6, 12),
                dia_todo=False,
                local='Sala de Defesas 2'
            )
        ]
        
        # PÃ³s-GraduaÃ§Ã£o - Aulas (2Âº Semestre)
        eventos_pos_2s = [
            Eventos(
                id_categoria=9,
                titulo='PerÃ­odo de Aulas - PÃ³s-GraduaÃ§Ã£o 2Âº Semestre',
                descricao='PerÃ­odo de aulas do 2Âº semestre de pÃ³s-graduaÃ§Ã£o',
                datainicio=datetime(2025, 8, 4),   # Segunda
                datafim=datetime(2025, 12, 15),    # Segunda
                dia_todo=False,
                local='Bloco de PÃ³s-GraduaÃ§Ã£o'
            )
        ]
        
        # PÃ³s-GraduaÃ§Ã£o - Defesas e SeminÃ¡rios (2Âº Semestre)
        eventos_defesas_2s = [
            Eventos(
                id_categoria=10,
                titulo='SeminÃ¡rio de Pesquisa - 2Âº Semestre',
                descricao='ApresentaÃ§Ã£o de projetos de pesquisa',
                datainicio=datetime(2025, 9, 18),
                datafim=datetime(2025, 9, 18),
                dia_todo=False,
                local='AuditÃ³rio Central'
            ),
            Eventos(
                id_categoria=10,
                titulo='Defesa de DissertaÃ§Ã£o: Carlos Pereira',
                descricao='ComputaÃ§Ã£o em Nuvem para Sistemas Embarcados',
                datainicio=datetime(2025, 10, 23),
                datafim=datetime(2025, 10, 23),
                dia_todo=False,
                local='Sala de Defesas 1'
            ),
            Eventos(
                id_categoria=10,
                titulo='Defesa de Tese: Ana Oliveira',
                descricao='Sistemas de RecomendaÃ§Ã£o baseados em Aprendizado Profundo',
                datainicio=datetime(2025, 11, 27),
                datafim=datetime(2025, 11, 27),
                dia_todo=False,
                local='Sala de Defesas 2'
            )
        ]
        
        # ======= INSTITUCIONAL =======
        
        # Institucional - ReuniÃµes (1Âº Semestre)
        eventos_reunioes_1s = [
            Eventos(
                id_categoria=11,
                titulo='ReuniÃ£o do Conselho UniversitÃ¡rio',
                descricao='Pauta: OrÃ§amento anual',
                datainicio=datetime(2025, 2, 15),
                datafim=datetime(2025, 2, 15),
                dia_todo=False,
                local='Sala do Conselho'
            ),
            Eventos(
                id_categoria=11,
                titulo='ReuniÃ£o de Coordenadores',
                descricao='AvaliaÃ§Ã£o do inÃ­cio do semestre',
                datainicio=datetime(2025, 3, 10),
                datafim=datetime(2025, 3, 10),
                dia_todo=False,
                local='Sala de ReuniÃµes A'
            ),
            Eventos(
                id_categoria=11,
                titulo='Colegiado de GraduaÃ§Ã£o',
                descricao='DiscussÃ£o de casos discentes',
                datainicio=datetime(2025, 5, 5),
                datafim=datetime(2025, 5, 5),
                dia_todo=False,
                local='Sala de ReuniÃµes B'
            )
        ]
        
        # Institucional - ReuniÃµes (2Âº Semestre)
        eventos_reunioes_2s = [
            Eventos(
                id_categoria=12,
                titulo='ReuniÃ£o do Conselho UniversitÃ¡rio - 2Âº Semestre',
                descricao='Pauta: Planejamento do prÃ³ximo ano',
                datainicio=datetime(2025, 8, 15),
                datafim=datetime(2025, 8, 15),
                dia_todo=False,
                local='Sala do Conselho'
            ),
            Eventos(
                id_categoria=12,
                titulo='ReuniÃ£o de Coordenadores - 2Âº Semestre',
                descricao='AvaliaÃ§Ã£o do segundo semestre',
                datainicio=datetime(2025, 9, 10),
                datafim=datetime(2025, 9, 10),
                dia_todo=False,
                local='Sala de ReuniÃµes A'
            ),
            Eventos(
                id_categoria=12,
                titulo='Colegiado de PÃ³s-GraduaÃ§Ã£o',
                descricao='Planejamento de disciplinas para o prÃ³ximo ano',
                datainicio=datetime(2025, 11, 5),
                datafim=datetime(2025, 11, 5),
                dia_todo=False,
                local='Sala de ReuniÃµes B'
            )
        ]
        
        # ======= EVENTOS =======
        
        # Eventos - Palestras (1Âº Semestre)
        eventos_palestras = [
            Eventos(
                id_categoria=13,
                titulo='Palestra de Boas-vindas',
                descricao='OrientaÃ§Ãµes aos calouros',
                datainicio=datetime(2025, 2, 5),
                datafim=datetime(2025, 2, 5),
                dia_todo=False,
                local='AuditÃ³rio Principal'
            ),
            Eventos(
                id_categoria=13,
                titulo='Palestra: Mercado de Trabalho em TI',
                descricao='Palestrante: Empresa BigTech',
                datainicio=datetime(2025, 4, 17),
                datafim=datetime(2025, 4, 17),
                dia_todo=False,
                local='AuditÃ³rio Principal'
            ),
            Eventos(
                id_categoria=13,
                titulo='Palestra: Sustentabilidade Ambiental',
                descricao='Palestrante: Dr. Silva Costa',
                datainicio=datetime(2025, 6, 5),
                datafim=datetime(2025, 6, 5),
                dia_todo=False,
                local='AuditÃ³rio SecundÃ¡rio'
            )
        ]
        
        # Eventos - Congressos (2Âº Semestre)
        eventos_congressos = [
            Eventos(
                id_categoria=14,
                titulo='Congresso de IniciaÃ§Ã£o CientÃ­fica',
                descricao='ApresentaÃ§Ã£o de trabalhos de IC',
                datainicio=datetime(2025, 10, 15),
                datafim=datetime(2025, 10, 17),
                dia_todo=True,
                local='Centro de ConvenÃ§Ãµes'
            ),
            Eventos(
                id_categoria=14,
                titulo='SimpÃ³sio de Tecnologia e InovaÃ§Ã£o',
                descricao='ApresentaÃ§Ãµes e workshops',
                datainicio=datetime(2025, 11, 10),
                datafim=datetime(2025, 11, 12),
                dia_todo=True,
                local='AuditÃ³rio Principal e Salas Anexas'
            )
        ]
        
        # Juntar todos os eventos
        todos_eventos = (
            eventos_aulas_1s +
            eventos_provas_1s +
            eventos_feriados_1s +
            eventos_aulas_2s +
            eventos_provas_2s +
            eventos_feriados_2s +
            eventos_pos_1s +
            eventos_defesas_1s +
            eventos_pos_2s +
            eventos_defesas_2s +
            eventos_reunioes_1s +
            eventos_reunioes_2s +
            eventos_palestras +
            eventos_congressos
        )
        
        # Inserir todos os eventos
        db.session.add_all(todos_eventos)
        db.session.commit()
        print(f"âœ… {len(todos_eventos)} eventos inseridos")
        
        print("âœ…âœ…âœ… Banco de dados populado com sucesso!")

if __name__ == '__main__':
    seed_database()